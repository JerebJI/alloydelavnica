<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Alloy delavnica</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/blood.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<!-- morda dodaj alloy logo na stran -->
				<section>
					Kaj je modeliranje programja?
					Uporaba matematičnih metod za predstavo in analizo računalniških programov.

					Kaj so formalne metode?
					Uporaba formalnih matematičnih metod pri razumevanju, dokazovanju pravilnosti in razvoju programov.
					
					Kaj so "formalne matematične metode"?
					Program razumemo kot matematični objekt.
				</section>

				<section>
					<section>
						"Veriga" formalnih metod

						morda slika verige obstoja
					</section>

					<section>
						<div class="mermaid" style="display: flex; justify-content: center; align-items: center; height: 100%;">
							flowchart TD
								A[Ideja] --> B[Koda]
						</div>
					</section>

					<section>
						<div class="mermaid" style="display: flex; justify-content: center; align-items: center; height: 100%;">
							flowchart TD
								A[Ideja] --> B[Formalizacija]
								B --> C[Koda]
						</div>
					</section>

					<section>
						<div class="mermaid" style="display: flex; justify-content: center; align-items: center; height: 100%;">
							flowchart TD
								A[Ideja] --> B[formalizacija zahtev kode]
								B --> C[formalizacija delovanja kode]
								C --> D[Koda]
						</div>
					</section>

					<section>
						<div class="mermaid" style="display: flex; justify-content: center; align-items: center; height: 100%;">
							flowchart TD
								A[Ideja] -->|Elaborations| B[formalizacija zahtev kode]
								B --> C[formalizacija delovanja kode]
								C -->|Refinements| D[Koda]
						</div>
					</section>

					<section>
						<div class="mermaid" style="display: flex; justify-content: center; align-items: center; height: 100%;">
							flowchart TD
								AA[Stranka] -->|Requirements engineering| A
								A[Ideja] -->|Elaborations| C[Formalizacija]
								C -->|Refinements| D[Višjenivojska koda]
								D -->|Compiler| E[Strojna koda]
								E --> AA
						</div>
					</section>

					<!-- Verige:
						- 2 (ideja,koda)
						- 3 (ideja,formalizacija,koda)
						- 4 (ideja, formalizacija zahtev kode, formalizacija delovanja kode, koda)
						- 5 (kupec, specifikacija, formalizacija zahtev kode, formalizacija delovanja kode, koda)
						- \infty (ideja,elaborations,formalizacija,refinements,koda)
						- resničnost (krog)
						- morda v hecu (kupec -llm-> koda)

						Povej kaj je v praksi uporabno.
					-->
				</section>
				<section>
					<h3>Kako modeliramo?</h3><br>
					<ul>
						<li>
							<h4>neinteraktiven program</h4>
							<ul>
								<li>začetno in končno stanje</li>
								<li>ponavadi je lažje formalizirati</li>
								<li>Alloy ni ravno primeren</li>
							</ul><br><br>
						</li>
						<li>
							<h4>interaktiven program</h4>
							<ul>
								<li>definiraš začetno stanje/okolje</li>
								<li>definiraš akcije nad sistemom oz. prehode med stanji</li>
								<li>invariante</li>
							</ul>
						</li>
					</ul>
				</section>
				
				<section>
					<h4>Modeliranje stanj</h4>

					<ul>
						<li>ponavadi imamo v mislih, da stanje predstavlja prirejanje spremenljivk</li>
						<li>boljši način: imamo stvari in odnose med njimi</li>
						<li>oz. imamo tabele</li>
					</ul>

					Ko modeliramo stanje vedno začnemo s tem, da si zamislimo, kaj
					so objekti in relacije med njimi.
				</section>
				
				<section>
					<h4>Z <span class="hljs-keyword">sig</span> deklariramo nov tip objekta.</h4>

					<div style="display: flex; justify-content: center; align-items: center; height: 100%;">
						<img src="media/object.drawio.svg">
					</div>

					<pre><code class="alloy" data-trim data-line-numbers>
						sig Object {}
					</code></pre>
				</section>
				
				<section>
					<h4>Če jih je več so med seboj disjunktni</h4>

					<div style="display: flex; justify-content: center; align-items: center; height: 100%;">
						<img src="media/o1o2.drawio.svg">
					</div>

					<pre><code class="alloy" data-trim data-line-numbers>
						sig Object1 {}
						sig Object2 {}
					</code></pre>
				</section>
				
				<section>
					<h4>Lahko tudi pove, da je nek objekt podtip drugega</h4>

					<div style="display: flex; justify-content: center; align-items: center; height: 100%;">
						<img src="media/oab.drawio.svg">
					</div>

					<pre><code class="alloy" data-trim data-line-numbers>
						sig Object {}
						sig A in Object {}
						sig B in Object {}
					</code></pre>
				</section>
				
				<section>
					<h4>Povemo lahko tudi želimo disjunktne množice</h4>

					<div style="display: flex; justify-content: center; align-items: center; height: 100%;">
						<img src="media/oeab.svg">
					</div>

					<pre><code class="alloy" data-trim data-line-numbers>
						sig Object {}
						sig A extends Object {}
						sig B extends Object {}
					</code></pre>
				</section>
				
				<section>
					<h4>Kako je z mešanjem?</h4>

					<div class="r-stack">
						<img class="fragment" src="media/oeab.svg">
						<img class="fragment" src="media/oabc.drawio.svg">
					</div>

					<pre><code class="alloy" data-trim data-line-numbers>
						sig Object {}
						sig B in Object {}
						sig A, C extends Object {}
					</code></pre>
				</section>
				
				<section>
					<h4>Lahko zahtevamo, da v množici ni "drugih elementov"</h4>

					<div style="display: flex; justify-content: center; align-items: center; height: 100%;">
						<img src="media/aoab.drawio.svg">
					</div>

					<pre><code class="alloy" data-trim data-line-numbers>
						abstract sig Object {}
						sig A in Object {}
						sig B in Object {}  
					</code></pre>
				</section>
				
				<section>
					Lahko tudi zahtevamo določeno število stvari

					<pre><code class="alloy" data-trim data-line-numbers>
						sig A {}      // neopredeljeno število A-jev
						
						one sig B {}  // natanko en element B
						
						some sig C {} // vsaj en element C
						
						lone sig D {} // eden ali noben element D
					</code></pre>

					Slika primerne instance.

				</section>
				
				<section>
					Dve nalogi:
					- Prva ima neko kompleksno sliko in nekaj alloy kode za izbrati
					- obratno: alloy koda in izbiraš slike
				</section>

				<section>
					Definiramo lahko tudi relacije med objekti

					<div style="display: flex; justify-content: center; align-items: center; height: 100%;">
						<img src="media/alloy2.png"
					</div>
					<!--
						some disj _Webpage3,_Webpage2,_Webpage1,_Webpage0 : univ {
							// configuration
							Int = -1 + -2 + -3 + -4 + -5 + -6 + -7 + -8 + 0 + 1 + 2 + 3 + 4 + 5 + 6 + 7
							seq/Int = 0 + 1 + 2 + 3 + 4
							String = none
							this/Webpage = _Webpage0 + _Webpage1 + _Webpage2 + _Webpage3
							(this/Webpage <: parent_page) = _Webpage0 -> _Webpage2 + _Webpage1 -> _Webpage3 + _Webpage2 -> _Webpage2 + _Webpage3 -> _Webpage1
							(this/Webpage <: link) = _Webpage0 -> _Webpage3 + _Webpage1 -> _Webpage0 + _Webpage1 -> _Webpage2 + _Webpage2 -> _Webpage0 + _Webpage2 -> _Webpage1 + _Webpage2 -> _Webpage2 + _Webpage2 -> _Webpage3
							univ = -1 + -2 + -3 + -4 + -5 + -6 + -7 + -8 + 0 + 1 + 2 + 3 + 4 + 5 + 6 + 7 + _Webpage0 + _Webpage1 + _Webpage2 + _Webpage3
						}
					-->

					<pre><code class="alloy" data-trim data-line-numbers>
						sig Webpage {
							parent_page : lone Webpage,
							link : set Webpage
						}
					</code></pre>
				</section>

				<!-- Tukaj daj vprašanja: kako omogočiti, da ni linkov nase;  -->
				<section data-background-iframe="http://alloy4fun.inesctec.pt/dnZn7eDrPmPhEYRYg" data-background-interactive></section> 
				<!-- 
				<section>
					<p><a href="http://alloy4fun.inesctec.pt/dnZn7eDrPmPhEYRYg">Alloy online</a></p>
				</section>
				-->

				<section>
					<h4>Seveda objekti podedujejo stvari</h4>

					<!-- TODO: parentOf, ali lažji primer ali pa postopno odpiranje kode -->

					<pre><code class="alloy" data-trim data-line-numbers>
						abstract sig FileSystemObject {
							parent : one Folder
						}

						sig Folder extends FileSystemObject {}

						one sig Root extends Folder {}

						sig Content {}

						sig File extends FileSystemObject {
							content : one Content
						}
					</code></pre>
				</section>
				<section data-background-iframe="http://alloy4fun.inesctec.pt/iAm6X9w6PGYv4yfwK" data-background-interactive></section> 
				<!-- 
				<section>
					<p><a href="">Alloy online</a></p>
				</section>
				-->
				<section>
					<h2>V Alloyu je vse relacija</h2>
				</section>
				<section>
					<h4>Vse je množica n-teric</h4>
					<pre><code class="alloy" data-trim data-line-numbers>
						sig C {
							f : C
						}
					</code></pre>

					<p class="fragment">f je relacija {(C0,C1), (C0,C2), ...}</p>
					<p class="fragment">1 je relacija {(1)}</p>
					<p class="fragment">C je relacija {(C0), (C1), ...}</p>
					<p class="fragment">Torej operacije z relacijami delujejo "povsod"</p>
			
					<!-- Omejitve so dolžine in none ?? (str. 55) -->

				</section>
				<section>
					<table style="border-collapse: collapse; border: none;">
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">univ</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">množica vseh elementov</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">none</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">prazna množica</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">iden</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">relacija med elementi in samim sabo</td>
						</tr>
					</table>
				</section>
				<section>
					<table style="border-collapse: collapse; border: none;">
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">+</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">unija množic (∪)</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">&</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">presek množic (∩)</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">-</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">odštevanje množic</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">in</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">relacija "je podmnožica" (⊆)</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">=</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">enakost množic</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">-></span></td>
							<td style="border: none; padding: 0.4em 0.8em;">produkt relacij</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">disj</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">relacija disjunktnosti</td>
						</tr>
					</table>
				</section>
				<section>
					<table style="border-collapse: collapse; border: none;">
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">^</span>r</td>
							<td style="border: none; padding: 0.4em 0.8em;">tranzitivna ovojnica r</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">~</span>r</td>
							<td style="border: none; padding: 0.4em 0.8em;">obrat relacije (x r y → y r x)</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">*</span>r</td>
							<td style="border: none; padding: 0.4em 0.8em;">tranzitivno-refleksivna ovojnica relacij</td>
						</tr>
					</table>
				</section>
				<section>
					<section>
						<h2>Kompozicija relacij <span class="hljs-built_in">.</span></h2>

						Kompozicija relacij poveže dve relaciji.
					</section>
					<section>
						Morda slika s puščicami
					</section>
					<section>
						Primer s tabelami
						daj primer array.index
					</section>
					<section>
						formalno
						\[\begin{aligned}E[p . q]i = \{(&amp;p_1,..,p_{n-1}, q_2,..,q_m) |\\ &amp;(p_1,..,p_n) \in E[p]i \land\\ &amp;(q_1,..,q_m) \in E[q]i \land \\ &amp;p_n = q_1\}\end{aligned}\]
					</section>
				</section>
				<section>
					<h2>Operator <span class="hljs-built_in">[]</span></h2>
					r.s = r[s]
					(r.s).t = r.s[t]
				</section>
				<section>
					<section>
						<h4>Zožitev relacij <span class="hljs-built_in">&lt;:</span>,<span class="hljs-built_in">:&gt;</span></h4>
						
						Namen je odstraniti kakšne povezave.
					</section>
					<section>
						slika s puščicami
					</section>
					<section>
						slika s tabelami
					</section>
					<section>
						formalna definicija
					</section>
				</section>
				<section>
					<h4>Povozi <span class="hljs-built_in">++</span></h4>
				</section>
				<!--
					Vsak operator:
					- z besedami
					- formalna definicija
					- slika
					- primer
				-->
				<section>
					Naloge:
					- par primerov operacij (večih hkrati)
					- morda kakšen obratno??

					Izberi nek primer in naredi zaporedje slajdov, kjer uporabimo relacije
					za izraz tega
				</section>
				<section>
					<h3>Logika</h3>
				</section>
				<section>
					<table style="border-collapse: collapse; border: none;">
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">!</span></td>
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">not</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">logična operacija negacije</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">&&</span></td>
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">and</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">logična operacija in</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">||</span></td>
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">or</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">logična operacija ali</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">=&gt;</span></td>
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">implies</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">logična operacija implikacije</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-built_in">&lt;=&gt;</span></td>
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">iff</span></td>
							<td style="border: none; padding: 0.4em 0.8em;">logična operacija ekvivalence</td>
						</tr>
						<tr style="border: none;">
							<td colspan="2" style="border: none; padding: 0.4em 0.8em;">b <span class="hljs-literal">implies</span> c <span class="hljs-literal">else</span> d <br>
							b <span class="hljs-built_in">=&gt;</span> c <span class="hljs-literal">else</span> d</td>
							<td style="border: none; padding: 0.4em 0.8em;">logični pogojni stavek</td>
						</tr>
					</table>
				</section>
				<section>
					<table style="border-collapse: collapse; border: none;">
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">all</span> x: e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za vse x v e</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">some</span> x: e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za nek x v e</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">no</span> x: e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za vse x v e</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">lone</span> x: e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za največ en x v e</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">one</span> x: e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za natano en x v e</td>
						</tr>
					</table>
				</section>
				<section>
					<table style="border-collapse: collapse; border: none;">
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">all disj</span> x, y: e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za vse x v e</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">some</span> x: <span class="hljs-literal">lone</span> e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za vse x v e</td>
						</tr>
						<tr style="border: none;">
							<td style="border: none; padding: 0.4em 0.8em;"><span class="hljs-literal">lone</span> x: <span class="hljs-literal">set</span> e | F</td>
							<td style="border: none; padding: 0.4em 0.8em;">F velja za vse x v e</td>
						</tr>
					</table>
				</section>
				<section>
					<h3>Števila</h3><br>
					<ul>
						<li>
							<h5>Velikost relacije</h5>
							<span class="hljs-built_in">#</span><br><br>
						</li>
						<li>
							<h5>Operacije</h5>
							<span class="hljs-built_in">plus</span>, <span class="hljs-built_in">minus</span>, <span class="hljs-built_in">mul</span>, <span class="hljs-built_in">div</span>, <span class="hljs-built_in">rem</span><br><br>
						</li>
						<li>
							<h5>Relacije</h5>
							<span class="hljs-built_in">=</span>, <span class="hljs-built_in">&lt;</span>, <span class="hljs-built_in">&gt;</span>, <span class="hljs-built_in">=&lt;</span>, <span class="hljs-built_in">&gt;=</span><br><br>
						</li>
					</ul>
				</section>
				<section>
					<h3>Vsota</h3>
					<ul>
						<li>
							<span class="hljs-literal">sum</span> x: <span class="hljs-literal">lone</span> e | ie
						</li>
						<li>
							e.<span class="hljs-literal">sum</span>
						</li>
						<li>
							{x1: e1, x2: e2, ... | F}
						</li>
					</ul>
				</section>
				<!--
					Tabela kvantifikatorjev in morda branj
					omeni disj
					omeni a.x
					omeni set
					omeni lone, one...
					omeni števila, #...
					omeni set comprehension

					Pojdi čez isti primer kot pri relacijah
				-->
				<section>
					## Zaganjanje
					run, check

				</section>
				<section>
					## Praktičen del
					Daj naloge iz:
					https://github.com/haslab/Alloy4Fun/wiki/Examples
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			const hljs = RevealHighlight().hljs;
			hljs.registerLanguage('alloy', function() {
				return {
					name: 'alloy',
					keywords: {
						keyword: 'sig extends in abstract one some lone set',
						literal: 'true false none',
						built_in: 'Int seq univ iden + & - = ~ ^ *'
					},
					contains: [
						hljs.COMMENT('//', '$'),
						hljs.C_NUMBER_MODE,
						hljs.QUOTE_STRING_MODE
					]
				};
			});
		</script>
		<script src="plugin/math/math.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/reveal.js-mermaid-plugin@11.4.1/plugin/mermaid/mermaid.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath, RevealMermaid ]
			});
		</script>
	</body>
</html>